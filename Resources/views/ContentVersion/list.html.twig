{% trans_default_domain 'AdvancedContentBundle' %}

{% import "@SherlockodeAdvancedContent/Common/Macros/classes.html.twig" as classes %}

<div class="version-history">
    <table
        class="{{ classes.table() }} version-history-table"
        {% if content.id is not null %}data-save-draft-url="{{ path('sherlockode_acb_content_save_draft', {id: content.id}) }}"{% endif %}
        data-load-version-url="{{ path(app.request.attributes.get('_route'), app.request.attributes.get('_route_params')) }}"
        data-remove-version-url="{{ path('sherlockode_acb_content_delete_version', {id: content.id}) }}"
    >
        <thead>
        <tr>
            <th>{{ 'content_version.list.id'|trans }}</th>
            <th>{{ 'content_version.list.date'|trans }}</th>
            <th>{{ 'content_version.list.user'|trans }}</th>
            <th>{{ 'content_version.list.actions.title'|trans }}</th>
        </tr>
        </thead>
        <tbody>
        {% if content.contentVersion is not null %}
            {{ include('@SherlockodeAdvancedContent/ContentVersion/_line.html.twig', {'version': content.contentVersion}) }}
        {% endif %}
        {% set i = 0 %}
        {% for version in content.versions %}
            {% if content.contentVersion is null or content.contentVersion.id != version.id %}
                {{ include('@SherlockodeAdvancedContent/ContentVersion/_line.html.twig', {'version': version}) }}
                {% set i = i + 1 %}
            {% endif %}
            {% if i == 4 and not loop.last %}
                <tr class="see-all">
                    <td colspan="4"><i class="fa-solid fa-angles-down"></i>{{ 'content_version.list.display_all'|trans }}</td>
                </tr>
            {% endif %}
        {% endfor %}
        </tbody>
    </table>
</div>
